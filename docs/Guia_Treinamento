# ğŸ“ Programa Crescer â€” AutomaÃ§Ã£o de Testes Backend  
## ğŸ§¢ Hat Store API  
> Guia de Treinamento QA â€” MÃ³dulo API  
ğŸ’¬ *â€œAutomaÃ§Ã£o Ã© confianÃ§a em cada requisiÃ§Ã£o.â€*

---

## ğŸ“˜ MÃ³dulo 1 â€” IntroduÃ§Ã£o ao Projeto

### ğŸ¯ Objetivo
Este mÃ³dulo apresenta o projeto **Crescer_API**, desenvolvido para ensinar QAs iniciantes a criar **testes automatizados de API** utilizando o **Playwright**.

A API da **Hat Store** Ã© um e-commerce fictÃ­cio de chapÃ©us, com funcionalidades de **cadastro de usuÃ¡rios**, **consulta de estoque** e **criaÃ§Ã£o de pedidos**.  
Aqui, vocÃª aprenderÃ¡ a validar endpoints reais, interpretar respostas e construir automaÃ§Ãµes de forma profissional.

---

### ğŸ§° Tecnologias Utilizadas
| Tecnologia | FunÃ§Ã£o |
|-------------|--------|
| **Node.js** | Ambiente de execuÃ§Ã£o dos testes |
| **Playwright** | Framework de automaÃ§Ã£o de testes (modo API) |
| **Faker.js** | GeraÃ§Ã£o de dados falsos (usuÃ¡rios, emails) |
| **Dotenv** | Leitura das variÃ¡veis de ambiente (.env) |
| **Cross-env** | Controle de mÃºltiplos ambientes (dev, qa, prod) |

---

## ğŸ§± MÃ³dulo 2 â€” Estrutura do Projeto

A estrutura do repositÃ³rio segue o padrÃ£o de organizaÃ§Ã£o usado no **Crescer Front**, adaptado para testes de API:

```bash
Crescer_API/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ jsonFiles/
â”‚   â”‚   â”œâ”€â”€ BodyPostHatPedido.json
â”‚   â”‚   â””â”€â”€ BodyPostRegisterUer.json
â”‚   â”œâ”€â”€ fixtures/
â”‚   â”‚   â””â”€â”€ authFixture.js
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ helpers.js
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ getHatsEstoque.spec.js
â”‚   â”‚   â”œâ”€â”€ postAuthUsuario.spec.js
â”‚   â”‚   â””â”€â”€ postHatsPedidos.spec.js
â”‚   â””â”€â”€ hatStoreApi.js
â”œâ”€â”€ playwright.config.js
â”œâ”€â”€ package.json
â””â”€â”€ .env.dev / .env.qa
```

ğŸ’¡ **O que o QA aprende:**  
- Como identificar onde ficam os testes.  
- A funÃ§Ã£o de cada camada: **API (requisiÃ§Ãµes)**, **Fixtures (autenticaÃ§Ã£o)** e **Helpers (dados de teste)**.  
- Como o Playwright lÃª o ambiente atravÃ©s do `playwright.config.js`.

---

## ğŸ§© MÃ³dulo 3 â€” Teste 1: Cadastro de UsuÃ¡rio

### ğŸ“„ Arquivo: `postAuthUsuario.spec.js`

Este teste valida o endpoint `/auth/register`, responsÃ¡vel por cadastrar um novo usuÃ¡rio na API.

```js
test('Cadastro de novo usuÃ¡rio', async ({ request }) => {
  const response = await request.post(`${BASE_URL}/auth/register`, {
    data: user,
  });
  expect(response.status()).toBe(201);
});
```

ğŸ’¡ **O que o QA aprende:**
- Como enviar uma requisiÃ§Ã£o **POST** usando o Playwright.  
- A diferenÃ§a entre **dados vÃ¡lidos e duplicados**.  
- Como validar o **status code** esperado (`201`, `400`, `409`).  

ğŸ§© **ExercÃ­cio prÃ¡tico:**
> Crie um novo teste para o endpoint `/auth/login`, usando os mesmos dados de registro.  
> Valide se a resposta contÃ©m o campo `token` e se o status Ã© `200`.

---

## ğŸ© MÃ³dulo 4 â€” Teste 2: Consulta de Estoque

### ğŸ“„ Arquivo: `getHatsEstoque.spec.js`

O objetivo deste teste Ã© garantir que o endpoint `/api/estoque` retorne corretamente a lista de chapÃ©us disponÃ­veis.

```js
test('Listar produtos em estoque', async ({ request }) => {
  const response = await request.get(`${BASE_URL}/api/estoque`);
  expect(response.ok()).toBeTruthy();
  const hats = await response.json();
  expect(hats.length).toBeGreaterThan(0);
  expect(hats[0]).toHaveProperty('nome');
});
```

ğŸ’¡ **O que o QA aprende:**
- Como validar uma resposta **GET**.  
- Como converter a resposta em JSON (`response.json()`).  
- Como validar que o array retornado contÃ©m dados reais.  

ğŸ§© **ExercÃ­cio prÃ¡tico:**
> Adicione uma validaÃ§Ã£o extra garantindo que todos os chapÃ©us tenham `quantidade > 0`.

---

## ğŸ’° MÃ³dulo 5 â€” Teste 3: CriaÃ§Ã£o de Pedido com Cupom

### ğŸ“„ Arquivo: `postHatsPedidos.spec.js`

Este teste cobre o fluxo de criaÃ§Ã£o de pedido e valida a aplicaÃ§Ã£o do cupom **HATOFF**, que dÃ¡ desconto no primeiro pedido.

```js
test('Criar pedido com cupom HATOFF', async ({ request }) => {
  const response = await request.post(`${BASE_URL}/api/pedido`, {
    data: pedido,
    headers: { Authorization: `Bearer ${token}` },
  });
  expect(response.status()).toBe(200);
  const body = await response.text();
  expect(body).toContain("Pedido registrado com sucesso");
});
```

ğŸ’¡ **O que o QA aprende:**
- Como enviar requisiÃ§Ãµes **autenticadas com token JWT**.  
- Como validar regras de negÃ³cio (ex: cupom apenas no primeiro pedido).  
- Como ler a resposta textual de um POST.  

ğŸ§© **ExercÃ­cios prÃ¡ticos:**
1. Crie um novo teste que tente aplicar o cupom â€œHATOFFâ€ duas vezes.  
2. Simule um pedido com CPF invÃ¡lido e valide o erro retornado (`400`).  

---

## ğŸ§© MÃ³dulo 6 â€” Arquivos de Apoio

### ğŸ“¦ `helpers.js`
ContÃ©m funÃ§Ãµes para gerar usuÃ¡rios aleatÃ³rios e tokens.  
Utiliza **Faker.js** para criar dados Ãºnicos a cada teste.

### ğŸ” `authFixture.js`
Cria automaticamente um usuÃ¡rio e gera um **token JWT** antes da execuÃ§Ã£o dos testes protegidos.

### ğŸ“¦ `jsonFiles`
Guarda os corpos das requisiÃ§Ãµes (`BodyPostHatPedido.json`, `BodyPostRegisterUer.json`).  
Esses arquivos ajudam a manter os testes organizados e fÃ¡ceis de entender.

ğŸ’¡ **O que o QA aprende:**
- Separar dados de lÃ³gica.  
- Reutilizar cÃ³digo com helpers.  
- Executar testes autenticados sem precisar logar manualmente.

---

## âš™ï¸ MÃ³dulo 7 â€” ExecuÃ§Ã£o e RelatÃ³rios

ApÃ³s configurar o ambiente (`.env.dev`), execute os testes com:

```bash
npm run test:dev
```

O Playwright gera automaticamente um relatÃ³rio HTML com os resultados:  

```bash
npx playwright show-report
```

ğŸ’¡ **Dica:**  
Ao abrir o relatÃ³rio, analise:
- Status de cada teste (âœ… ou âŒ)  
- Tempo de execuÃ§Ã£o  
- Logs e traces das requisiÃ§Ãµes

ğŸ§© **ExercÃ­cio prÃ¡tico:**
> Execute a suÃ­te completa e verifique qual teste teve o maior tempo de execuÃ§Ã£o.

---

## ğŸ’¡ MÃ³dulo 8 â€” Boas PrÃ¡ticas

| Boa PrÃ¡tica | DescriÃ§Ã£o |
|--------------|------------|
| **Isolar dados** | Evite dependÃªncia entre testes |
| **Usar helpers e fixtures** | Centralize funÃ§Ãµes comuns |
| **Reutilizar JSONs** | Mantenha consistÃªncia nos payloads |
| **Validar status e body** | Sempre confirme o comportamento esperado |
| **Manter nomes claros** | Nomes de testes devem refletir a aÃ§Ã£o validada |

ğŸ§© **ExercÃ­cio prÃ¡tico:**
> Escolha um dos testes existentes e refatore um trecho de cÃ³digo duplicado para um helper.

---

## ğŸ”— MÃ³dulo 9 â€” IntegraÃ§Ã£o com o Frontend

A automaÃ§Ã£o de API do Crescer_API Ã© parte essencial do fluxo da Hat Store.  
O frontend consome diretamente os endpoints testados aqui:

| Tela do Frontend | Endpoint da API |
|------------------|----------------|
| Cadastro de usuÃ¡rio | `/auth/register` |
| Lista de chapÃ©us | `/api/estoque` |
| Pedido com cupom | `/api/pedido` |

ğŸ’¡ **O que o QA aprende:**
- Garantir que o backend esteja validado antes de testar o front.  
- Compreender a ligaÃ§Ã£o entre **camadas de teste** (API â†’ UI).

ğŸ§© **ExercÃ­cio prÃ¡tico:**
> Execute o front e os testes de API simultaneamente e observe o comportamento integrado.

---

## ğŸ“ ConclusÃ£o

Neste mÃ³dulo, vocÃª aprendeu a:  
âœ… Escrever testes de API com Playwright.  
âœ… Validar respostas reais e status codes.  
âœ… Automatizar fluxos completos de cadastro, estoque e pedidos.  
âœ… Usar helpers, fixtures e JSONs para manter cÃ³digo limpo e sustentÃ¡vel.

> ğŸ’¬ *â€œCada teste Ã© uma garantia de qualidade. Automatizar Ã© construir confianÃ§a.â€*

---

### ğŸ‘¥ Autores
| Nome | FunÃ§Ã£o | LinkedIn |
|------|--------|-----------|
| **Marcelo Feiteiro** | Backend e automaÃ§Ã£o QA | [linkedin.com/in/marcelo-feiteiro-96a7a4142](https://www.linkedin.com/in/marcelo-feiteiro-96a7a4142/) |
| **Joelma Prestes Ferreira** | DocumentaÃ§Ã£o, QA e integraÃ§Ã£o front/back | [linkedin.com/in/joprestes](https://www.linkedin.com/in/joprestes) |

---

**ğŸ“„ Fim do Guia â€” Crescer_API**  
*Programa Crescer â€“ AutomaÃ§Ã£o de Testes Backend*
